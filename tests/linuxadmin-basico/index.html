<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen de Administrador Linux</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f72585;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            background-color: #f5f7fa;
            color: var(--dark);
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-weight: 300;
            opacity: 0.9;
        }
        
        .quiz-container {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .question {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .question:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .options {
            display: grid;
            gap: 0.8rem;
        }
        
        .option {
            display: flex;
            align-items: center;
        }
        
        .option input {
            margin-right: 0.8rem;
            transform: scale(1.1);
        }
        
        .option label {
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .option:hover label {
            color: var(--primary);
        }
        
        .true-false {
            display: flex;
            gap: 1.5rem;
        }
        
        .btn {
            display: inline-block;
            padding: 0.8rem 1.8rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            text-align: center;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: #f0f4ff;
        }
        
        .result-container {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            display: none;
        }
        
        .result-title {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .score {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .percentage {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            margin: 1rem 0;
        }
        
        .feedback {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: var(--dark);
            opacity: 0.9;
        }
        
        .certificate-container {
            display: none;
            background: white;
            padding: 3rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            border: 15px solid #f8f9fa;
        }
        
        .certificate-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><text x="10" y="50" font-family="Arial" font-size="10" fill="rgba(67, 97, 238, 0.05)" transform="rotate(-45 50,50)">Certificado Linux</text></svg>');
            opacity: 0.3;
            z-index: 0;
        }
        
        .certificate-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        
        .certificate-title {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-weight: 700;
        }
        
        .certificate-subtitle {
            font-size: 1.2rem;
            color: var(--dark);
            margin-bottom: 2rem;
            opacity: 0.8;
        }
        
        .certificate-name {
            font-size: 1.8rem;
            margin: 2rem 0;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(63, 55, 201, 0.1));
            border-radius: 5px;
            display: inline-block;
        }
        
        .certificate-score {
            font-size: 4rem;
            font-weight: 700;
            color: var(--primary);
            margin: 1.5rem 0;
        }
        
        .certificate-text {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            line-height: 1.8;
        }
        
        .certificate-footer {
            margin-top: 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .certificate-date {
            font-style: italic;
            opacity: 0.7;
        }
        
        .certificate-signature {
            font-weight: 600;
        }
        
        .name-input {
            margin: 2rem 0;
            text-align: center;
        }
        
        .name-input input {
            padding: 0.8rem 1.2rem;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            header {
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .quiz-container, .result-container, .certificate-container {
                padding: 1.5rem;
            }
            
            .true-false {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .certificate-title {
                font-size: 2rem;
            }
            
            .certificate-score {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Examen de Administrador Linux</h1>
            <p class="subtitle">Demuestra tus conocimientos y obtén tu certificado</p>
        </header>
        
        <div class="quiz-container" id="quizForm">
            <!-- Pregunta 1 -->
            <div class="question">
                <p class="question-text">1. ¿Qué comando se utiliza para cambiar los permisos de archivos en Linux?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q1" id="q1a" value="a">
                        <label for="q1a">a) chmod</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q1" id="q1b" value="b">
                        <label for="q1b">b) chown</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q1" id="q1c" value="c">
                        <label for="q1c">c) perm</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q1" id="q1d" value="d">
                        <label for="q1d">d) setperm</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 2 -->
            <div class="question">
                <p class="question-text">2. Verdadero o Falso: El usuario 'root' en Linux tiene acceso ilimitado a todos los comandos y archivos.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q2" id="q2true" value="true">
                        <label for="q2true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q2" id="q2false" value="false">
                        <label for="q2false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 3 -->
            <div class="question">
                <p class="question-text">3. ¿Qué comando usarías para buscar una cadena específica en archivos?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q3" id="q3a" value="a">
                        <label for="q3a">a) find</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q3" id="q3b" value="b">
                        <label for="q3b">b) grep</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q3" id="q3c" value="c">
                        <label for="q3c">c) locate</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q3" id="q3d" value="d">
                        <label for="q3d">d) search</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 4 -->
            <div class="question">
                <p class="question-text">4. Verdadero o Falso: El comando 'sudo' permite a usuarios normales ejecutar comandos con privilegios de root.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q4" id="q4true" value="true">
                        <label for="q4true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q4" id="q4false" value="false">
                        <label for="q4false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 5 -->
            <div class="question">
                <p class="question-text">5. ¿Qué archivo contiene información de cuentas de usuario en Linux?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q5" id="q5a" value="a">
                        <label for="q5a">a) /etc/passwd</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q5" id="q5b" value="b">
                        <label for="q5b">b) /etc/users</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q5" id="q5c" value="c">
                        <label for="q5c">c) /etc/shadow</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q5" id="q5d" value="d">
                        <label for="q5d">d) /etc/accounts</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 6 -->
            <div class="question">
                <p class="question-text">6. ¿Qué muestra el comando 'ls -l'?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q6" id="q6a" value="a">
                        <label for="q6a">a) Archivos en formato largo con permisos</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q6" id="q6b" value="b">
                        <label for="q6b">b) Archivos ordenados por tamaño</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q6" id="q6c" value="c">
                        <label for="q6c">c) Solo archivos ocultos</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q6" id="q6d" value="d">
                        <label for="q6d">d) Archivos en orden inverso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 7 -->
            <div class="question">
                <p class="question-text">7. Verdadero o Falso: El comando 'rm -rf /' es seguro de ejecutar ya que solo eliminará directorios vacíos.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q7" id="q7true" value="true">
                        <label for="q7true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q7" id="q7false" value="false">
                        <label for="q7false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 8 -->
            <div class="question">
                <p class="question-text">8. ¿Qué comando se usa para verificar el uso del espacio en disco?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q8" id="q8a" value="a">
                        <label for="q8a">a) du</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q8" id="q8b" value="b">
                        <label for="q8b">b) df</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q8" id="q8c" value="c">
                        <label for="q8c">c) diskfree</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q8" id="q8d" value="d">
                        <label for="q8d">d) freespace</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 9 -->
            <div class="question">
                <p class="question-text">9. Verdadero o Falso: El comando 'kill' solo puede terminar procesos por su PID.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q9" id="q9true" value="true">
                        <label for="q9true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q9" id="q9false" value="false">
                        <label for="q9false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 10 -->
            <div class="question">
                <p class="question-text">10. ¿Cuál de los siguientes NO es una distribución de Linux?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q10" id="q10a" value="a">
                        <label for="q10a">a) Ubuntu</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q10" id="q10b" value="b">
                        <label for="q10b">b) CentOS</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q10" id="q10c" value="c">
                        <label for="q10c">c) Fedora</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q10" id="q10d" value="d">
                        <label for="q10d">d) macOS</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 11 -->
            <div class="question">
                <p class="question-text">11. ¿Cuál es el propósito del demonio 'cron'?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q11" id="q11a" value="a">
                        <label for="q11a">a) Gestionar logs del sistema</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q11" id="q11b" value="b">
                        <label for="q11b">b) Programar tareas recurrentes</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q11" id="q11c" value="c">
                        <label for="q11c">c) Monitorear rendimiento del sistema</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q11" id="q11d" value="d">
                        <label for="q11d">d) Gestionar cuentas de usuario</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 12 -->
            <div class="question">
                <p class="question-text">12. Verdadero o Falso: El comando 'tar' solo puede crear archivos pero no comprimirlos.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q12" id="q12true" value="true">
                        <label for="q12true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q12" id="q12false" value="false">
                        <label for="q12false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 13 -->
            <div class="question">
                <p class="question-text">13. ¿Qué comando usarías para ver el contenido de un archivo?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q13" id="q13a" value="a">
                        <label for="q13a">a) cat</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q13" id="q13b" value="b">
                        <label for="q13b">b) ls</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q13" id="q13c" value="c">
                        <label for="q13c">c) view</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q13" id="q13d" value="d">
                        <label for="q13d">d) open</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 14 -->
            <div class="question">
                <p class="question-text">14. Verdadero o Falso: El comando 'chmod 777' da permisos de lectura, escritura y ejecución a todos.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q14" id="q14true" value="true">
                        <label for="q14true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q14" id="q14false" value="false">
                        <label for="q14false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 15 -->
            <div class="question">
                <p class="question-text">15. ¿Qué directorio contiene el kernel de Linux y los archivos del gestor de arranque?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q15" id="q15a" value="a">
                        <label for="q15a">a) /bin</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q15" id="q15b" value="b">
                        <label for="q15b">b) /etc</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q15" id="q15c" value="c">
                        <label for="q15c">c) /boot</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q15" id="q15d" value="d">
                        <label for="q15d">d) /kernel</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 16 -->
            <div class="question">
                <p class="question-text">16. ¿Qué hace el comando 'ping'?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q16" id="q16a" value="a">
                        <label for="q16a">a) Prueba la conectividad de red</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q16" id="q16b" value="b">
                        <label for="q16b">b) Configura interfaces de red</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q16" id="q16c" value="c">
                        <label for="q16c">c) Muestra tablas de enrutamiento</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q16" id="q16d" value="d">
                        <label for="q16d">d) Monitorea tráfico de red</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 17 -->
            <div class="question">
                <p class="question-text">17. Verdadero o Falso: El valor 'umask' se resta de los permisos por defecto al crear nuevos archivos.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q17" id="q17true" value="true">
                        <label for="q17true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q17" id="q17false" value="false">
                        <label for="q17false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 18 -->
            <div class="question">
                <p class="question-text">18. ¿Qué comando usarías para encontrar qué proceso está usando un puerto específico?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q18" id="q18a" value="a">
                        <label for="q18a">a) netstat -tulnp</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q18" id="q18b" value="b">
                        <label for="q18b">b) ps aux</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q18" id="q18c" value="c">
                        <label for="q18c">c) top</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q18" id="q18d" value="d">
                        <label for="q18d">d) lsof -i</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 19 -->
            <div class="question">
                <p class="question-text">19. Verdadero o Falso: El proceso 'init' siempre tiene PID 1.</p>
                <div class="options true-false">
                    <div class="option">
                        <input type="radio" name="q19" id="q19true" value="true">
                        <label for="q19true">Verdadero</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q19" id="q19false" value="false">
                        <label for="q19false">Falso</label>
                    </div>
                </div>
            </div>
            
            <!-- Pregunta 20 -->
            <div class="question">
                <p class="question-text">20. ¿Qué comando usarías para actualizar las listas de paquetes en un sistema Ubuntu?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" name="q20" id="q20a" value="a">
                        <label for="q20a">a) apt-get update</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q20" id="q20b" value="b">
                        <label for="q20b">b) apt-get upgrade</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q20" id="q20c" value="c">
                        <label for="q20c">c) yum update</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="q20" id="q20d" value="d">
                        <label for="q20d">d) dpkg --update</label>
                    </div>
                </div>
            </div>
            
            <button type="button" class="btn btn-block" onclick="calculateScore()">Enviar Examen</button>
        </div>
        
        <div class="result-container" id="resultContainer">
            <h2 class="result-title">Resultados del Examen</h2>
            <div class="score" id="scoreText"></div>
            <div class="percentage" id="percentageText"></div>
            <div class="feedback" id="feedbackText"></div>
            
            <div class="name-input">
                <p>Ingresa tu nombre para generar el certificado:</p>
                <input type="text" id="userName" placeholder="Tu nombre completo">
            </div>
            
            <div class="action-buttons">
                <button type="button" class="btn" onclick="generateCertificate()">Generar Certificado</button>
                <button type="button" class="btn btn-secondary" onclick="resetQuiz()">Volver a Intentar</button>
            </div>
        </div>
        
        <div class="certificate-container" id="certificateContainer">
            <div class="certificate-content" id="certificateContent">
                <h2 class="certificate-title">Certificado de Linux</h2>
                <p class="certificate-subtitle">La Chica de Sistemas / Comunidad Andromeda</p>
                
                <div class="certificate-text">
                    Se certifica que
                    <div class="certificate-name" id="certificateName"></div>
                    ha obtenido una puntuación de
                    <div class="certificate-score" id="certificateScore"></div>
                    en el Examen de Administración Linux
                </div>
                
                <p class="certificate-text">¡Felicitaciones!</p>
                
                <div class="certificate-footer">
                    <div class="certificate-date" id="certificateDate"></div>
                    <div class="certificate-signature">La Chica de Sistemas</div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button type="button" class="btn" onclick="downloadCertificate()">Descargar Certificado</button>
                <button type="button" class="btn btn-secondary" onclick="printCertificate()">Imprimir Certificado</button>
                <button type="button" class="btn btn-secondary" onclick="backToResults()">Volver a Resultados</button>
            </div>
        </div>
    </div>
    
    <script>
        // Variables to store the score and percentage
        let currentScore = 0;
        let currentPercentage = 0;
        
        // Function to calculate the score
        function calculateScore() {
            // Correct answers
            const answers = {
                q1: "a",    // chmod
                q2: "true", // Verdadero
                q3: "b",    // grep
                q4: "true", // Verdadero
                q5: "a",    // /etc/passwd
                q6: "a",    // Archivos en formato largo con permisos
                q7: "false", // Falso (comando muy peligroso)
                q8: "b",    // df
                q9: "false", // Falso (puede usar nombre de proceso)
                q10: "d",    // macOS
                q11: "b",    // Programar tareas recurrentes
                q12: "false", // Falso (puede comprimir con opciones)
                q13: "a",    // cat
                q14: "true", // Verdadero
                q15: "c",    // /boot
                q16: "a",    // Prueba la conectividad de red
                q17: "true", // Verdadero
                q18: "d",    // lsof -i
                q19: "true", // Verdadero
                q20: "a"     // apt-get update
            };
            
            let score = 0;
            const totalQuestions = 20;
            
            // Check each question
            for (let i = 1; i <= totalQuestions; i++) {
                const questionName = "q" + i;
                const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);
                
                if (selectedOption) {
                    if (selectedOption.value === answers[questionName]) {
                        score++;
                    }
                }
            }
            
            // Calculate percentage
            const percentage = (score / totalQuestions) * 100;
            
            // Store the results
            currentScore = score;
            currentPercentage = percentage;
            
            // Display result
            const resultContainer = document.getElementById("resultContainer");
            const scoreText = document.getElementById("scoreText");
            const percentageText = document.getElementById("percentageText");
            const feedbackText = document.getElementById("feedbackText");
            
            scoreText.textContent = `Puntuación: ${score} de ${totalQuestions}`;
            percentageText.textContent = `${percentage.toFixed(1)}%`;
            feedbackText.textContent = getPerformanceMessage(percentage);
            
            // Show result container and hide quiz
            document.getElementById("quizForm").style.display = "none";
            resultContainer.style.display = "block";
            
            // Scroll to result
            resultContainer.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Function to get performance feedback
        function getPerformanceMessage(percentage) {
            if (percentage >= 90) return "¡Excelente! Eres un experto en Linux.";
            if (percentage >= 75) return "¡Buen trabajo! Tienes fuertes habilidades de administración Linux.";
            if (percentage >= 60) return "Buen esfuerzo. Tienes conocimientos básicos de Linux.";
            if (percentage >= 40) return "Sigue aprendiendo. Revisa los conceptos básicos de Linux.";
            return "Considera estudiar más a fondo los fundamentos de Linux.";
        }
        
        // Function to generate certificate
        function generateCertificate() {
            const userName = document.getElementById("userName").value.trim();
            
            if (!userName) {
                alert("Por favor ingresa tu nombre para generar el certificado.");
                return;
            }
            
            // Update certificate content
            document.getElementById("certificateName").textContent = userName;
            document.getElementById("certificateScore").textContent = `${currentPercentage.toFixed(1)}%`;
            
            // Set current date
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const today = new Date();
            document.getElementById("certificateDate").textContent = `Obtenido el ${today.toLocaleDateString('es-ES', options)}`;
            
            // Show certificate and hide results
            document.getElementById("resultContainer").style.display = "none";
            document.getElementById("certificateContainer").style.display = "block";
            
            // Scroll to certificate
            document.getElementById("certificateContainer").scrollIntoView({ behavior: 'smooth' });
        }
        
        // Function to download certificate as image
        function downloadCertificate() {
            // Show loading state
            const downloadBtn = document.querySelector('[onclick="downloadCertificate()"]');
            const originalText = downloadBtn.textContent;
            downloadBtn.textContent = "Generando...";
            downloadBtn.disabled = true;

            const certificateContent = document.getElementById("certificateContent");
            
            // Add a small delay to ensure DOM updates are complete
            setTimeout(() => {
                html2canvas(certificateContent, {
                    scale: 2,
                    logging: false,
                    useCORS: true,
                    allowTaint: true,
                    scrollX: 0,
                    scrollY: 0,
                    windowWidth: certificateContent.scrollWidth,
                    windowHeight: certificateContent.scrollHeight
                }).then(canvas => {
                    try {
                        const link = document.createElement('a');
                        const userName = document.getElementById("userName").value.trim() || "Certificado";
                        link.download = `Certificado-Linux-${userName}.png`;
                        link.href = canvas.toDataURL('image/png');
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    } catch (error) {
                        console.error("Error generating certificate:", error);
                        alert("Error al generar el certificado. Por favor intente nuevamente.");
                    } finally {
                        // Restore button state
                        downloadBtn.textContent = originalText;
                        downloadBtn.disabled = false;
                    }
                }).catch(error => {
                    console.error("html2canvas error:", error);
                    alert("Error al generar la imagen del certificado. Asegúrese de que todo el contenido se haya cargado correctamente.");
                    downloadBtn.textContent = originalText;
                    downloadBtn.disabled = false;
                });
            }, 100);
        }
        
        // Function to print certificate
        function printCertificate() {
            // Show loading state
            const printBtn = document.querySelector('[onclick="printCertificate()"]');
            const originalText = printBtn.textContent;
            printBtn.textContent = "Preparando...";
            printBtn.disabled = true;

            // Create a clone of the certificate content
            const certificateContent = document.getElementById("certificateContent").cloneNode(true);
            
            // Create print-specific styles
            const printStyles = `
                <style>
                    @media print {
                        body { 
                            font-family: 'Poppins', sans-serif; 
                            padding: 0;
                            margin: 0;
                            background: white !important;
                        }
                        .certificate-content { 
                            width: 100% !important;
                            height: 100% !important;
                            margin: 0 !important;
                            padding: 20px !important;
                            border: none !important;
                            box-shadow: none !important;
                            background: white !important;
                        }
                        .certificate-title { 
                            font-size: 28pt !important; 
                            margin-bottom: 20px !important;
                        }
                        .certificate-name { 
                            font-size: 20pt !important;
                            margin: 30px 0 !important;
                        }
                        .certificate-score { 
                            font-size: 36pt !important;
                            margin: 30px 0 !important;
                        }
                        .certificate-text { 
                            font-size: 14pt !important;
                            margin: 15px 0 !important;
                        }
                        .action-buttons { display: none !important; }
                        @page { 
                            size: A4 landscape; 
                            margin: 0; 
                        }
                    }
                </style>
            `;
            
            // Open print window
            const printWindow = window.open('', '_blank');
            printWindow.document.open();
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Certificado Linux</title>
                        ${printStyles}
                    </head>
                    <body>
                        ${certificateContent.innerHTML}
                        <script>
                            setTimeout(function() {
                                window.print();
                                window.close();
                            }, 200);
                        </script>
                    </body>
                </html>
            `);
            printWindow.document.close();

            // Restore button state
            printBtn.textContent = originalText;
            printBtn.disabled = false;
        }
        
        // Function to go back to results
        function backToResults() {
            document.getElementById("certificateContainer").style.display = "none";
            document.getElementById("resultContainer").style.display = "block";
            document.getElementById("resultContainer").scrollIntoView({ behavior: 'smooth' });
        }
        
        // Function to reset the quiz
        function resetQuiz() {
            // Clear all selections
            const allInputs = document.querySelectorAll('input[type="radio"]');
            allInputs.forEach(input => {
                input.checked = false;
            });
            
            // Clear name field
            document.getElementById("userName").value = "";
            
            // Show quiz and hide results
            document.getElementById("quizForm").style.display = "block";
            document.getElementById("resultContainer").style.display = "none";
            document.getElementById("certificateContainer").style.display = "none";
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
